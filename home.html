<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>الصفحة الرئيسية</title>
<style>
:root{
  --bg-1:#f4f7fb;
  --bg-2:#eaf0f8;
  --accent:#4aa3ff;
  --accent-2:#6de0b8;
  --muted:#6b7280;
  --card-shadow:0 8px 30px rgba(47,60,78,0.08);
}
*{box-sizing:border-box}
html,body{margin:0;padding:0;height:100%;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Cairo",Arial,sans-serif;background:linear-gradient(180deg,var(--bg-1),var(--bg-2));color:#0f172a}
.app{min-height:100%;padding:30px;display:flex;justify-content:center;align-items:flex-start;position:relative}
.container{width:100%;max-width:1100px;background:linear-gradient(180deg,rgba(255,255,255,0.85),rgba(255,255,255,0.9));border-radius:18px;padding:22px;box-shadow:var(--card-shadow);border:1px solid rgba(15,23,42,0.04)}
h2,h3{margin:8px 0}
input[type=text],input[type=password],select{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(15,23,42,0.05);margin:6px 0;background:white;font-size:14px}
button{padding:10px 14px;border-radius:12px;border:none;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white;font-weight:700;cursor:pointer;margin-top:6px}
button:hover{opacity:0.9}
.top-right-text{position:absolute;top:12px;right:12px;font-size:14px;color:#0f172a;font-weight:700;background:rgba(255,255,255,0.6);padding:6px 12px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.1);}
.table-wrap{overflow:auto;border-radius:12px;border:1px solid rgba(15,23,42,0.04);margin-top:15px}
table{width:100%;border-collapse:collapse}
th,td{padding:12px;text-align:center;border-bottom:1px solid rgba(15,23,42,0.03)}
th{background:linear-gradient(180deg,rgba(250,250,250,0.8),rgba(245,247,250,0.8));font-weight:700}
.pwd-input{padding:8px;border-radius:8px;border:1px solid rgba(15,23,42,0.06);width:140px}
.action-btn{padding:8px 10px;border-radius:10px;border:none;cursor:pointer;font-weight:700;margin-left:6px}
.danger{background:#ff6b6b;color:white}
.muted{background:transparent;border:1px solid rgba(15,23,42,0.04);color:var(--muted)}
.badge{display:inline-block;padding:6px 8px;border-radius:999px;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white;font-weight:800}
.footer{margin-top:14px;color:var(--muted);font-size:13px;text-align:center}
</style>
</head>
<body>
<div class="top-right-text">سبحان الله وبحمده، سبحان الله العظيم</div>
<div class="app">
  <div class="container">
    <h2>مرحباً بك في لوحة المستخدمين</h2>
    <div style="text-align:right;margin-bottom:12px">
      <strong id="currentUser">---</strong> <button onclick="logout()">تسجيل خروج</button>
    </div><div id="adminPanel" style="display:none;margin-bottom:18px">
  <h3>إضافة مستخدم جديد</h3>
  <input id="newUsername" type="text" placeholder="اسم المستخدم" />
  <input id="newPassword" type="text" placeholder="كلمة المرور" />
  <input id="newTime" type="text" placeholder="الوقت (08:00)" />
  <select id="newPeriod">
    <option value="شهر">شهر</option>
    <option value="10 أيام">10 أيام</option>
    <option value="يوم">يوم</option>
  </select>
  <button onclick="addUser()">إضافة مستخدم</button>
</div>

<div class="table-wrap">
  <table>
    <thead>
      <tr>
        <th>المستخدم</th>
        <th>كلمة المرور</th>
        <th>الوقت</th>
        <th>المدة</th>
        <th>باقٍ (أيام)</th>
        <th>إجراءات</th>
      </tr>
    </thead>
    <tbody id="userTable"></tbody>
  </table>
</div>
<div class="footer">واجهة iOS فاتح — لطيف على العين وسهل الاستخدام</div>

  </div>
</div><script>
const STORAGE_KEY="user_manager_v2";
let users=[]; let currentUser=null;

function loadUsers(){ 
  const stored=localStorage.getItem(STORAGE_KEY);
  if(stored) users=JSON.parse(stored);
  else users=[{username:"رئيسي",password:"5555",time:"08:00",period:"شهر",createdAt:new Date().toISOString()}];
}

function saveUsers(){ localStorage.setItem(STORAGE_KEY,JSON.stringify(users)); }

function daysRemaining(createdAt,period){
  const start=new Date(createdAt);
  let total=30;
  if(period==="10 أيام") total=10;
  if(period==="يوم") total=1;
  const diff=Math.floor((Date.now()-start.getTime())/(1000*60*60*24));
  return Math.max(total-diff,0);
}

function renderTable(){
  const tbody=document.getElementById('userTable'); tbody.innerHTML="";
  users.forEach(user=>{
    const tr=document.createElement('tr');
    const tdName=document.createElement('td'); tdName.textContent=user.username;
    if(user.username==="رئيسي"){ const b=document.createElement('span'); b.className='badge'; b.textContent='مشرف'; tdName.appendChild(b); }
    const tdPass=document.createElement('td'); 
    tdPass.textContent = (currentUser.username==="رئيسي") ? user.password : '••••••'; 
    const tdTime=document.createElement('td'); tdTime.textContent=user.time;
    const tdPeriod=document.createElement('td'); tdPeriod.textContent=user.period;
    const tdRemain=document.createElement('td'); tdRemain.textContent=daysRemaining(user.createdAt,user.period)+" يوم";
    const tdActions=document.createElement('td'); 
    if(currentUser.username==="رئيسي" && user.username!=="رئيسي"){
      const delBtn=document.createElement('button'); delBtn.className='action-btn danger'; delBtn.textContent='حذف'; delBtn.onclick=()=>{ if(confirm('هل تريد حذف المستخدم '+user.username+'؟')){ users=users.filter(u=>u.username!==user.username); saveUsers(); renderTable(); } };
      tdActions.appendChild(delBtn);
    } else tdActions.textContent='-';
    tr.appendChild(tdName); tr.appendChild(tdPass); tr.appendChild(tdTime); tr.appendChild(tdPeriod); tr.appendChild(tdRemain); tr.appendChild(tdActions);
    tbody.appendChild(tr);
  });
}

function addUser(){
  const un=document.getElementById('newUsername').value.trim();
  const pw=document.getElementById('newPassword').value.trim();
  const time=document.getElementById('newTime').value.trim();
  const period=document.getElementById('newPeriod').value;
  if(!un||!pw||!time) return alert("املأ جميع الحقول");
  if(users.some(u=>u.username===un)) return alert("اسم المستخدم موجود");
  users.push({username:un,password:pw,time:time,period:period,createdAt:new Date().toISOString()});
  saveUsers(); renderTable();
  document.getElementById('newUsername').value='';
  document.getElementById('newPassword').value='';
  document.getElementById('newTime').value='';
}

function logout(){ localStorage.removeItem('currentUser'); window.location.href='login.html'; }

function init(){
  const storedUser=localStorage.getItem('currentUser');
  if(!storedUser){ window.location.href='login.html'; return; }
  currentUser=JSON.parse(storedUser); loadUsers();
  document.getElementById('currentUser').textContent=currentUser.username;
  if(currentUser.username==="رئيسي") document.getElementById('adminPanel').style.display='block';
  renderTable();
}

init();
</script></body>
</html>